<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ID追剧 - 输入ID直接看</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 微软雅黑, sans-serif;
        }
        body {
            background-color: #0f0f0f;
            color: #fff;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        /* 标题区域 */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 1px solid #333;
        }
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #00a1d6;
        }
        .header p {
            color: #999;
            font-size: 14px;
        }
        /* ID输入区域 */
        .input-area {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }
        #video-id {
            width: 350px;
            padding: 12px 15px;
            border: 1px solid #333;
            border-radius: 6px;
            background-color: #1a1a1a;
            color: #fff;
            font-size: 16px;
        }
        #submit-btn {
            padding: 12px 30px;
            background-color: #00a1d6;
            border: none;
            border-radius: 6px;
            color: #fff;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #submit-btn:hover {
            background-color: #0086b3;
        }
        /* 播放区域 */
        .player-area {
            background-color: #1a1a1a;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 30px;
            display: none; /* 初始隐藏 */
        }
        .player-header {
            padding: 15px 20px;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .player-title {
            font-size: 18px;
        }
        .copy-btn {
            padding: 6px 12px;
            background-color: #333;
            border: none;
            border-radius: 4px;
            color: #fff;
            font-size: 14px;
            cursor: pointer;
        }
        .video-player {
            width: 100%;
            height: 600px;
            border: none;
        }
        /* 历史记录区域 */
        .history-area {
            background-color: #1a1a1a;
            border-radius: 8px;
            padding: 20px;
        }
        .history-area h3 {
            font-size: 18px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .clear-history {
            font-size: 14px;
            color: #00a1d6;
            background: none;
            border: none;
            cursor: pointer;
        }
        .history-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .history-item {
            padding: 8px 15px;
            background-color: #2d2d2d;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .history-item:hover {
            background-color: #00a1d6;
        }
        /* 提示文本 */
        .tip-text {
            text-align: center;
            color: #999;
            font-size: 14px;
            margin: 20px 0;
        }
        /* 响应式调整 */
        @media (max-width: 768px) {
            .input-area {
                flex-direction: column;
                align-items: center;
            }
            #video-id {
                width: 100%;
                max-width: 350px;
            }
            .video-player {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 标题区域 -->
        <div class="header">
            <h1>ID追剧神器</h1>
            <p>输入影视/番剧ID，直接在线播放 | 支持腾讯、优酷、爱奇艺、B站</p>
        </div>

        <!-- ID输入区域 -->
        <div class="input-area">
            <input type="text" id="video-id" placeholder="请输入影视ID（示例：mzc00200q8e9e8x / ep701438）" autocomplete="off">
            <button id="submit-btn">立即播放</button>
        </div>

        <p class="tip-text">ID获取方式：从平台播放页URL提取（例：腾讯https://v.qq.com/x/cover/XXX.html → XXX即ID；B站https://www.bilibili.com/bangumi/play/epXXX → ep后数字即ID）</p>

        <!-- 播放区域 -->
        <div class="player-area" id="player-area">
            <div class="player-header">
                <div class="player-title" id="player-title">正在播放：未知内容</div>
                <button class="copy-btn" onclick="copyCurrentUrl()">复制播放链接</button>
            </div>
            <iframe class="video-player" id="video-iframe" src=""></iframe>
        </div>

        <!-- 历史记录区域 -->
        <div class="history-area">
            <h3>播放历史 <button class="clear-history" onclick="clearHistory()">清空</button></h3>
            <div class="history-list" id="history-list">
                <!-- 历史记录将通过JS动态添加 -->
            </div>
        </div>
    </div>

    <script>
        // 平台播放链接模板（ID替换{id}）
        const platformTemplates = {
            tencent: 'https://v.qq.com/x/cover/{id}.html', // 腾讯视频ID（如mzc00200q8e9e8x）
            youku: 'https://v.youku.com/x/cover/{id}.html', // 优酷视频ID（如mjkzbm7ys6z985r）
            iqiyi: 'https://www.iqiyi.com/v_{id}.html', // 爱奇艺ID（如19rybf7ts8）
            bilibili: 'https://www.bilibili.com/bangumi/play/{id}', // B站番剧ID（如ep701438）
            bilibili_video: 'https://player.bilibili.com/player.html?aid={id}' // B站普通视频ID（如aid）
        };

        // 自动识别ID对应的平台（简单规则匹配）
        function getPlatformByID(id) {
            if (id.startsWith('mzc') || id.startsWith('mjs')) return 'tencent'; // 腾讯ID特征
            if (id.startsWith('mj') || id.includes('xf')) return 'youku'; // 优酷ID特征
            if (/^\d+$/.test(id) || id.startsWith('19ry')) return 'iqiyi'; // 爱奇艺ID特征
            if (id.startsWith('ep') || id.startsWith('ss')) return 'bilibili'; // B站番剧ID特征
            return 'bilibili_video'; // 默认B站视频
        }

        // 生成播放链接
        function generatePlayUrl(id) {
            const platform = getPlatformByID(id);
            return platformTemplates[platform].replace('{id}', id);
        }

        // 页面元素
        const videoIdInput = document.getElementById('video-id');
        const submitBtn = document.getElementById('submit-btn');
        const playerArea = document.getElementById('player-area');
        const videoIframe = document.getElementById('video-iframe');
        const playerTitle = document.getElementById('player-title');
        const historyList = document.getElementById('history-list');

        // 加载历史记录
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('playHistory') || '[]');
            historyList.innerHTML = '';
            if (history.length === 0) {
                historyList.innerHTML = '<span style="color:#999;">暂无播放历史</span>';
                return;
            }
            history.forEach(item => {
                const div = document.createElement('div');
                div.className = 'history-item';
                div.textContent = item.id;
                div.onclick = () => {
                    videoIdInput.value = item.id;
                    playVideo(item.id);
                };
                historyList.appendChild(div);
            });
        }

        // 保存历史记录
        function saveHistory(id) {
            let history = JSON.parse(localStorage.getItem('playHistory') || '[]');
            // 去重（避免重复添加）
            history = history.filter(item => item.id !== id);
            // 添加到开头
            history.unshift({ id, time: new Date().getTime() });
            // 限制最多保存20条
            if (history.length > 20) history.pop();
            localStorage.setItem('playHistory', JSON.stringify(history));
            loadHistory();
        }

        // 清空历史记录
        function clearHistory() {
            localStorage.removeItem('playHistory');
            loadHistory();
        }

        // 播放视频
        function playVideo(id) {
            if (!id.trim()) {
                alert('请输入有效的影视ID！');
                return;
            }
            const playUrl = generatePlayUrl(id);
            // 设置iframe播放（使用embed方式兼容部分平台）
            videoIframe.src = playUrl;
            playerTitle.textContent = `正在播放：ID=${id}`;
            playerArea.style.display = 'block';
            // 保存历史记录
            saveHistory(id);
            // 滚动到播放区域
            playerArea.scrollIntoView({ behavior: 'smooth' });
        }

        // 复制当前播放链接
        function copyCurrentUrl() {
            const currentUrl = videoIframe.src;
            if (!currentUrl) {
                alert('暂无播放链接可复制！');
                return;
            }
            navigator.clipboard.writeText(currentUrl).then(() => {
                alert('播放链接已复制到剪贴板！');
            }).catch(() => {
                alert('复制失败，请手动复制地址栏链接！');
            });
        }

        // 绑定提交按钮事件
        submitBtn.addEventListener('click', () => {
            const id = videoIdInput.value.trim();
            playVideo(id);
        });

        // 绑定回车事件
        videoIdInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') submitBtn.click();
        });

        // 初始加载历史记录
        window.onload = loadHistory;
    </script>
</body>
</html>
